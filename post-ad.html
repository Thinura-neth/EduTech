<!DOCTYPE html>
<html lang="si">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Post Your Ad - EduTech</title>
    <link rel="stylesheet" href="assets/css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>
    <script src="firebase-config.js"></script>
    <style>
        /* Specific Styles for Post Ad Page */
        .page-header {
            margin-bottom: 2rem;
        }

        .ad-form-content {
            max-width: 700px;
            margin: 0 auto;
        }

        .package-selection {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .package-card {
            background: rgba(30, 41, 59, 0.8);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .package-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.3);
        }

        .package-card.selected {
            border-color: var(--primary);
            box-shadow: 0 0 20px rgba(6, 182, 212, 0.4);
            background: rgba(6, 182, 212, 0.1);
        }

        .package-card h4 {
            color: var(--primary);
            margin-bottom: 0.5rem;
            font-size: 1.2rem;
        }

        .package-card .price {
            font-size: 2rem;
            font-weight: bold;
            color: var(--success);
            margin-bottom: 0.5rem;
        }

        .package-card p {
            color: var(--muted);
            font-size: 0.9rem;
        }

        .package-card input[type="radio"] {
            position: absolute;
            top: 10px;
            right: 10px;
            cursor: pointer;
        }

        .form-group textarea {
            min-height: 150px;
            resize: vertical;
        }
        
        /* Hidden input styling for visual selection */
        .package-selection input[type="radio"] {
            opacity: 0;
            position: absolute;
            width: 0;
            height: 0;
        }
    </style>
</head>
<body>
    <div class="loading-bar"></div>
    
    <header class="header">
        <nav class="nav">
            <div class="logo">EduTech Ad Posting</div>
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="dashboard.html">Dashboard</a></li>
                <li><a href="admin.html" id="adminLink" style="display: none;">Admin</a></li>
                <li><a href="login.html" id="loginLink">Login</a></li>
                <li><span class="user-welcome" id="userWelcome" style="display: none;"></span></li>
                <li><button class="logout-btn" onclick="logout()" style="display: none;">Logout</button></li>
            </ul>
        </nav>
    </header>

    <main class="container">
        <div class="page-header">
            <h1>Post Your Marketplace Ad</h1>
            <p>Reach thousands of learners and sellers in our community.</p>
        </div>

        <div id="authMessage" class="auth-message error" style="display: none;">
            <div class="message-content">
                <i class="fas fa-lock"></i>
                You must be logged in to post an advertisement. <a href="login.html">Login here</a>.
            </div>
        </div>

        <div id="adFormContent" class="ad-form-content card" style="display: none;">
            <form id="adSubmissionForm">
                
                <h2>1. Select Ad Package</h2>
                <div class="package-selection">
                    <label for="package-basic" class="package-card" id="card-basic">
                        <input type="radio" id="package-basic" name="package" value="basic" required onclick="selectPackage('basic')">
                        <h4>Basic Ad</h4>
                        <div class="price">$5</div>
                        <p>7 days active, Standard placement, 1 image.</p>
                    </label>
                    <label for="package-premium" class="package-card" id="card-premium">
                        <input type="radio" id="package-premium" name="package" value="premium" onclick="selectPackage('premium')">
                        <h4>Premium Ad</h4>
                        <div class="price">$15</div>
                        <p>30 days active, Featured placement, 3 images.</p>
                    </label>
                </div>

                <h2>2. Ad Details</h2>
                <div class="form-group">
                    <label for="adTitle">Ad Title</label>
                    <input type="text" id="adTitle" required placeholder="e.g., Used Raspberry Pi 4 for Sale">
                </div>
                
                <div class="form-group">
                    <label for="adDescription">Description</label>
                    <textarea id="adDescription" required placeholder="Provide a detailed description of the item or service."></textarea>
                </div>
                
                <div class="form-group">
                    <label for="adPrice">Price ($)</label>
                    <input type="number" id="adPrice" required min="0" placeholder="Enter price or 0 for Negotiable">
                </div>
                
                <div class="form-group">
                    <label for="adImage">Upload Image (Max 1)</label>
                    <input type="file" id="adImage" accept="image/*" required>
                </div>

                <h2>3. Contact Details</h2>
                <div class="form-group">
                    <label for="sellerName">Your Name</label>
                    <input type="text" id="sellerName" required placeholder="Your Name" readonly>
                </div>
                
                <div class="form-group">
                    <label for="sellerEmail">Your Email</label>
                    <input type="email" id="sellerEmail" required placeholder="Your Email" readonly>
                </div>

                <div class="form-group mt-3">
                    <button type="submit" class="btn btn-primary btn-auth">Submit Ad for Review</button>
                    <p class="text-center text-muted mt-2">All ads are subject to admin approval.</p>
                </div>
            </form>
        </div>
    </main>

    <footer class="footer">
        <p>&copy; 2024 EduTech. All rights reserved.</p>
    </footer>

    <script src="assets/js/central-db.js"></script>
    <script src="assets/js/auth.js"></script>
    <script src="assets/js/realtime-ads.js"></script>
    <script src="assets/js/ads-manager.js"></script>
    <script>
        function selectPackage(pkg) {
            document.querySelectorAll('.package-card').forEach(card => card.classList.remove('selected'));
            document.getElementById(`card-${pkg}`).classList.add('selected');
            document.getElementById(`package-${pkg}`).checked = true;
        }

        document.addEventListener('DOMContentLoaded', function() {
            updateNavigation();
            
            // Check authentication and display content
            if (!isLoggedIn()) {
                document.getElementById('authMessage').style.display = 'block';
                document.getElementById('adFormContent').style.display = 'none';
            } else {
                document.getElementById('authMessage').style.display = 'none';
                document.getElementById('adFormContent').style.display = 'block';
                
                // Pre-fill user information
                const user = getCurrentUser();
                document.getElementById('sellerName').value = user.full_name || '';
                document.getElementById('sellerEmail').value = user.email || '';
                
                // Select basic package by default
                selectPackage('basic');
            }
            
            // Animate loading bar (standard across all pages)
            const loadingBar = document.querySelector('.loading-bar');
            setTimeout(() => {
                loadingBar.style.width = '100%';
                setTimeout(() => {
                    loadingBar.style.opacity = '0';
                }, 500);
            }, 100);
        });
    </script>
</body>
</html>